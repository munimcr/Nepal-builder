<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoZayaan Tour Proposal Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --gozayaan-primary: #00026E;
            --gozayaan-dark: #000150;
            --gozayaan-light: #E8E8F5;
            --gozayaan-accent: #1D4DA3;
            --text-dark: #1a1a1a;
            --text-gray: #555;
            --border-color: #e0e0e0;
            --bg-light: #fafafa;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            grid-column: 1 / -1;
            background: white;
            padding: 30px 40px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 2, 110, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .logo {
            font-family: 'Poppins', sans-serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--gozayaan-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo::before {
            content: 'âœˆ';
            font-size: 36px;
        }

        .tagline {
            color: var(--text-gray);
            font-size: 14px;
            font-weight: 500;
        }

        .form-panel {
            background: white;
            padding: 35px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            max-height: calc(100vh - 200px);
            overflow-y: auto;
            animation: slideRight 0.6s ease-out;
        }

        @keyframes slideRight {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .preview-panel {
            background: white;
            padding: 35px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            max-height: calc(100vh - 200px);
            overflow-y: auto;
            animation: slideLeft 0.6s ease-out;
        }

        @keyframes slideLeft {
            from { transform: translateX(30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .panel-title {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            font-weight: 700;
            color: var(--gozayaan-dark);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--gozayaan-primary);
        }

        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            font-weight: 600;
            color: var(--gozayaan-dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--gozayaan-primary);
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            font-weight: 500;
            color: var(--text-dark);
            margin-bottom: 6px;
            font-size: 14px;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--gozayaan-primary);
            box-shadow: 0 0 0 3px rgba(0, 2, 110, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .btn-primary {
            background: var(--gozayaan-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--gozayaan-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 2, 110, 0.3);
        }

        .btn-secondary {
            background: var(--gozayaan-accent);
            color: white;
        }

        .btn-secondary:hover {
            background: #164191;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(29, 77, 163, 0.3);
        }

        .btn-outline {
            background: white;
            color: var(--gozayaan-primary);
            border: 2px solid var(--gozayaan-primary);
        }

        .btn-outline:hover {
            background: var(--gozayaan-light);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 13px;
        }

        .itinerary-day {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid var(--gozayaan-primary);
            transition: all 0.3s ease;
        }

        .itinerary-day:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .day-number {
            font-weight: 600;
            color: var(--gozayaan-primary);
            font-size: 15px;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            background: var(--bg-light);
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: var(--gozayaan-light);
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin: 0;
            cursor: pointer;
        }

        .preview-content {
            font-size: 13px;
            line-height: 1.6;
        }

        .preview-header {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--gozayaan-primary);
            margin-bottom: 25px;
        }

        .preview-title {
            font-family: 'Poppins', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--gozayaan-dark);
            margin-bottom: 10px;
        }

        .preview-subtitle {
            color: var(--text-gray);
            font-size: 15px;
            font-style: italic;
        }

        .preview-section {
            margin-bottom: 25px;
        }

        .preview-section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            font-weight: 600;
            color: var(--gozayaan-dark);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--gozayaan-light);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 15px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: var(--bg-light);
            border-radius: 6px;
        }

        .info-label {
            font-weight: 600;
            color: var(--text-gray);
        }

        .info-value {
            color: var(--gozayaan-dark);
            font-weight: 600;
        }

        .price-highlight {
            background: var(--gozayaan-primary);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            margin: 15px 0;
        }

        .list-item {
            padding: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .list-item::before {
            content: 'âœ“';
            position: absolute;
            left: 0;
            color: var(--gozayaan-primary);
            font-weight: 700;
        }

        .exclude-item::before {
            content: 'âœ—';
            color: var(--gozayaan-accent);
        }

        .itinerary-preview-day {
            background: var(--bg-light);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 4px solid var(--gozayaan-primary);
        }

        .download-section {
            position: sticky;
            bottom: 0;
            background: white;
            padding: 20px 0;
            border-top: 2px solid var(--border-color);
            margin-top: 20px;
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: var(--gozayaan-primary);
            font-weight: 600;
        }

        .loading.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <div class="logo">GoZayaan</div>
                <div class="tagline">Tour Proposal Generator</div>
            </div>
        </div>

        <div class="form-panel">
            <h2 class="panel-title">Create Tour Proposal</h2>
            
            <form id="proposalForm">
                <div class="form-section">
                    <div class="section-title">Basic Information</div>
                    
                    <div class="form-group">
                        <label>Tour Name *</label>
                        <input type="text" id="tourName" required value="Nepal Tour Package 7 Days & 6 Nights">
                    </div>

                    <div class="row">
                        <div class="form-group">
                            <label>Customer Name *</label>
                            <input type="text" id="customerName" required value="Saurav Biswas">
                        </div>
                        <div class="form-group">
                            <label>Phone Number *</label>
                            <input type="tel" id="phoneNumber" required value="1833184362">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Email Address *</label>
                        <input type="email" id="emailAddress" required value="hi.sauraav@gmail.com">
                    </div>

                    <div class="row">
                        <div class="form-group">
                            <label>Journey Date *</label>
                            <input type="date" id="journeyDate" required value="2026-02-17">
                        </div>
                        <div class="form-group">
                            <label>Return Date *</label>
                            <input type="date" id="returnDate" required value="2026-02-23">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">Travelers & Pricing</div>
                    
                    <div class="row">
                        <div class="form-group">
                            <label>Number of Adults *</label>
                            <input type="number" id="adults" min="0" value="2" required>
                        </div>
                        <div class="form-group">
                            <label>Number of Children</label>
                            <input type="number" id="children" min="0" value="0">
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group">
                            <label>Package Price (BDT) *</label>
                            <input type="number" id="packagePrice" required value="155250">
                        </div>
                        <div class="form-group">
                            <label>Discount (BDT)</label>
                            <input type="number" id="discount" value="20250">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Contact Person</label>
                        <input type="text" id="contactPerson" value="Nafis - 01325087570">
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">Tour Description</div>
                    
                    <div class="form-group">
                        <label>Tour Tagline</label>
                        <input type="text" id="tourTagline" value="Embark on an Unforgettable Journey to the Land of the Himalayas">
                    </div>

                    <div class="form-group">
                        <label>Tour Description</label>
                        <textarea id="tourDescription" rows="5">Discover the Magic of Nepal! Stunning panoramic views of the world's highest mountains, peaceful boat rides on pristine lakes, and the rich tapestry of ancient traditions unfolding before you. Trek through picturesque valleys, explore age-old temples and stupas, and encounter diverse wildlife in lush national parks.</textarea>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">Package Includes</div>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" class="include-checkbox" value="Flight Tickets: DAC - KTM - DAC" checked>
                            <span>Flight Tickets</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="include-checkbox" value="Accommodation in hotels" checked>
                            <span>Accommodation</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="include-checkbox" value="Meal: Breakfast" checked>
                            <span>Breakfast</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="include-checkbox" value="All transfers and tours as per itinerary" checked>
                            <span>Transfers & Tours</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="include-checkbox" value="Vehicle: Luxury Coach and Private CAR" checked>
                            <span>Vehicle</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="include-checkbox" value="All applicable government taxes" checked>
                            <span>Government Taxes</span>
                        </label>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">Package Excludes</div>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" class="exclude-checkbox" value="Visa Fee" checked>
                            <span>Visa Fee</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="exclude-checkbox" value="Personal expenses and tips" checked>
                            <span>Personal Expenses</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="exclude-checkbox" value="Monument entrance fees and guides" checked>
                            <span>Entrance Fees & Guides</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="exclude-checkbox" value="Medical and travel insurance" checked>
                            <span>Insurance</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="exclude-checkbox" value="Any kind of drinks (alcoholic, mineral, aerated)" checked>
                            <span>Drinks</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" class="exclude-checkbox" value="Laundry, phone calls, souvenirs" checked>
                            <span>Laundry & Extras</span>
                        </label>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">Daily Itinerary</div>
                    <div id="itineraryContainer"></div>
                    <button type="button" class="btn btn-outline btn-small" onclick="addItineraryDay()">+ Add Day</button>
                </div>
            </form>
        </div>

        <div class="preview-panel">
            <h2 class="panel-title">Preview</h2>
            <div id="previewContent" class="preview-content"></div>
            
            <div class="download-section">
                <div class="loading" id="loading">Generating PDF...</div>
                <button class="btn btn-primary" onclick="generatePDF()" style="width: 100%;">
                    ðŸ“„ Download PDF Proposal
                </button>
            </div>
        </div>
    </div>

    <script>
        let itineraryDays = [
            {
                day: 1,
                date: '2026-02-17',
                location: 'Kathmandu',
                hotel: 'Hotel Surya Heritage',
                roomType: 'Deluxe',
                nights: 1,
                activities: 'Arrival, Transfer to Hotel, stay'
            },
            {
                day: 2,
                date: '2026-02-18',
                location: 'Pokhara',
                hotel: 'Majestic Lake Front & Suites',
                roomType: 'Deluxe',
                nights: 3,
                activities: 'Breakfast at hotel, transfer to bus park by 6:30 am, transfer to Pokhara, pick up from bus park and transfer to Pokhara, stay'
            },
            {
                day: 3,
                date: '2026-02-19',
                location: 'Pokhara',
                hotel: 'Majestic Lake Front & Suites',
                roomType: 'Deluxe',
                nights: 0,
                activities: 'Early morning sarangkot sunrise, breakfast at hotel, sightseeing of Davis fall, guptshwor cave and mountain museum, stay'
            }
        ];

        function renderItinerary() {
            const container = document.getElementById('itineraryContainer');
            container.innerHTML = '';
            
            itineraryDays.forEach((day, index) => {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'itinerary-day';
                dayDiv.innerHTML = `
                    <div class="day-header">
                        <span class="day-number">Day ${day.day}</span>
                        <button type="button" class="btn btn-secondary btn-small" onclick="removeDay(${index})">Remove</button>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" value="${day.date}" onchange="updateDay(${index}, 'date', this.value)">
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" value="${day.location}" onchange="updateDay(${index}, 'location', this.value)">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label>Hotel Name</label>
                            <input type="text" value="${day.hotel}" onchange="updateDay(${index}, 'hotel', this.value)">
                        </div>
                        <div class="form-group">
                            <label>Room Type</label>
                            <input type="text" value="${day.roomType}" onchange="updateDay(${index}, 'roomType', this.value)">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Number of Nights</label>
                        <input type="number" min="0" value="${day.nights}" onchange="updateDay(${index}, 'nights', this.value)">
                    </div>
                    <div class="form-group">
                        <label>Activities</label>
                        <textarea rows="3" onchange="updateDay(${index}, 'activities', this.value)">${day.activities}</textarea>
                    </div>
                `;
                container.appendChild(dayDiv);
            });
            updatePreview();
        }

        function addItineraryDay() {
            const lastDay = itineraryDays[itineraryDays.length - 1];
            const nextDate = new Date(lastDay.date);
            nextDate.setDate(nextDate.getDate() + 1);
            
            itineraryDays.push({
                day: itineraryDays.length + 1,
                date: nextDate.toISOString().split('T')[0],
                location: '',
                hotel: '',
                roomType: 'Deluxe',
                nights: 1,
                activities: ''
            });
            renderItinerary();
        }

        function removeDay(index) {
            if (itineraryDays.length > 1) {
                itineraryDays.splice(index, 1);
                itineraryDays.forEach((day, i) => {
                    day.day = i + 1;
                });
                renderItinerary();
            }
        }

        function updateDay(index, field, value) {
            itineraryDays[index][field] = value;
            updatePreview();
        }

        function updatePreview() {
            const tourName = document.getElementById('tourName').value;
            const customerName = document.getElementById('customerName').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const emailAddress = document.getElementById('emailAddress').value;
            const journeyDate = document.getElementById('journeyDate').value;
            const returnDate = document.getElementById('returnDate').value;
            const adults = document.getElementById('adults').value;
            const children = document.getElementById('children').value;
            const packagePrice = parseFloat(document.getElementById('packagePrice').value) || 0;
            const discount = parseFloat(document.getElementById('discount').value) || 0;
            const finalPrice = packagePrice - discount;
            const contactPerson = document.getElementById('contactPerson').value;
            const tourTagline = document.getElementById('tourTagline').value;
            const tourDescription = document.getElementById('tourDescription').value;

            const includes = Array.from(document.querySelectorAll('.include-checkbox:checked')).map(cb => cb.value);
            const excludes = Array.from(document.querySelectorAll('.exclude-checkbox:checked')).map(cb => cb.value);

            const totalTravelers = parseInt(adults) + parseInt(children);

            let previewHTML = `
                <div class="preview-header">
                    <div class="preview-title">${tourName}</div>
                    <div class="preview-subtitle">${tourTagline}</div>
                </div>

                <div class="preview-section">
                    <div class="preview-section-title">Customer Information</div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Name:</span>
                            <span class="info-value">${customerName}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Phone:</span>
                            <span class="info-value">${phoneNumber}</span>
                        </div>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Email:</span>
                        <span class="info-value">${emailAddress}</span>
                    </div>
                </div>

                <div class="preview-section">
                    <div class="preview-section-title">Tour Details</div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Journey Date:</span>
                            <span class="info-value">${new Date(journeyDate).toLocaleDateString()}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Return Date:</span>
                            <span class="info-value">${new Date(returnDate).toLocaleDateString()}</span>
                        </div>
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Total Travelers:</span>
                            <span class="info-value">${totalTravelers} (Adults: ${adults}, Children: ${children})</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Contact Person:</span>
                            <span class="info-value">${contactPerson}</span>
                        </div>
                    </div>
                </div>

                <div class="preview-section">
                    <div class="preview-section-title">Pricing</div>
                    <div class="info-item">
                        <span class="info-label">Package Price:</span>
                        <span class="info-value">BDT ${packagePrice.toLocaleString()}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Discount:</span>
                        <span class="info-value">BDT ${discount.toLocaleString()}</span>
                    </div>
                    <div class="price-highlight">
                        Final Price Payable: BDT ${finalPrice.toLocaleString()}
                    </div>
                </div>

                <div class="preview-section">
                    <div class="preview-section-title">About This Tour</div>
                    <p style="line-height: 1.8; color: var(--text-gray);">${tourDescription}</p>
                </div>

                <div class="preview-section">
                    <div class="preview-section-title">Package Includes</div>
                    ${includes.map(item => `<div class="list-item">${item}</div>`).join('')}
                </div>

                <div class="preview-section">
                    <div class="preview-section-title">Package Excludes</div>
                    ${excludes.map(item => `<div class="list-item exclude-item">${item}</div>`).join('')}
                </div>

                <div class="preview-section">
                    <div class="preview-section-title">Daily Itinerary</div>
                    ${itineraryDays.map(day => `
                        <div class="itinerary-preview-day">
                            <div style="font-weight: 600; color: var(--gozayaan-primary); margin-bottom: 8px;">
                                Day ${day.day} - ${new Date(day.date).toLocaleDateString()} - ${day.location}
                            </div>
                            <div style="margin-bottom: 6px;">
                                <strong>Hotel:</strong> ${day.hotel} (${day.roomType}) - ${day.nights} Night(s)
                            </div>
                            <div style="color: var(--text-gray);">
                                <strong>Activities:</strong> ${day.activities}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;

            document.getElementById('previewContent').innerHTML = previewHTML;
        }

        async function generatePDF() {
            const loading = document.getElementById('loading');
            loading.classList.add('active');

            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                const tourName = document.getElementById('tourName').value;
                const customerName = document.getElementById('customerName').value;
                const phoneNumber = document.getElementById('phoneNumber').value;
                const emailAddress = document.getElementById('emailAddress').value;
                const journeyDate = document.getElementById('journeyDate').value;
                const returnDate = document.getElementById('returnDate').value;
                const adults = document.getElementById('adults').value;
                const children = document.getElementById('children').value;
                const packagePrice = parseFloat(document.getElementById('packagePrice').value) || 0;
                const discount = parseFloat(document.getElementById('discount').value) || 0;
                const finalPrice = packagePrice - discount;
                const contactPerson = document.getElementById('contactPerson').value;
                const tourTagline = document.getElementById('tourTagline').value;
                const tourDescription = document.getElementById('tourDescription').value;

                const includes = Array.from(document.querySelectorAll('.include-checkbox:checked')).map(cb => cb.value);
                const excludes = Array.from(document.querySelectorAll('.exclude-checkbox:checked')).map(cb => cb.value);

                let y = 15;
                const pageWidth = doc.internal.pageSize.width;
                const pageHeight = doc.internal.pageSize.height;
                const margin = 15;
                const maxWidth = pageWidth - 2 * margin;
                const colWidth = (maxWidth - 5) / 2;

                // Header - Compact
                doc.setFillColor(0, 2, 110);
                doc.rect(0, 0, pageWidth, 25, 'F');
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(18);
                doc.setFont(undefined, 'bold');
                doc.text('GoZayaan', margin, 12);
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                doc.text('www.gozayaan.com', margin, 18);
                
                // Contact person in header
                doc.setFontSize(7);
                doc.text(`Contact: ${contactPerson}`, pageWidth - margin - 50, 12);
                doc.text('tours@gozayaan.com', pageWidth - margin - 50, 16);

                y = 30;
                doc.setTextColor(0, 0, 0);

                // Tour Name - Compact
                doc.setFontSize(14);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(0, 2, 110);
                doc.text(tourName, margin, y);
                y += 5;

                doc.setFontSize(8);
                doc.setFont(undefined, 'italic');
                doc.setTextColor(85, 85, 85);
                const taglineLines = doc.splitTextToSize(tourTagline, maxWidth);
                doc.text(taglineLines, margin, y);
                y += Math.min(taglineLines.length * 3.5, 7) + 3;

                // Two Column Layout
                let leftY = y;
                let rightY = y;

                // LEFT COLUMN - Customer & Tour Info
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(0, 2, 110);
                doc.text('Proposal for:', margin, leftY);
                leftY += 5;

                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(0, 0, 0);
                doc.text(`${customerName}`, margin, leftY);
                leftY += 3.5;
                doc.text(`${phoneNumber} | ${emailAddress}`, margin, leftY);
                leftY += 5;

                // Tour Details
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(0, 2, 110);
                doc.text('Tour Details:', margin, leftY);
                leftY += 5;

                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(0, 0, 0);
                doc.text(`Journey: ${new Date(journeyDate).toLocaleDateString('en-GB')}`, margin, leftY);
                leftY += 3.5;
                doc.text(`Return: ${new Date(returnDate).toLocaleDateString('en-GB')}`, margin, leftY);
                leftY += 3.5;
                doc.text(`Travelers: ${parseInt(adults) + parseInt(children)} (Adults: ${adults}, Children: ${children})`, margin, leftY);
                leftY += 5;

                // Pricing Box - Compact
                const pricingHeight = 18;
                doc.setFillColor(0, 2, 110);
                doc.roundedRect(margin, leftY, colWidth, pricingHeight, 2, 2, 'F');
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(7);
                doc.text(`Package Price: BDT ${packagePrice.toLocaleString()}`, margin + 2, leftY + 4);
                doc.text(`Discount: BDT ${discount.toLocaleString()}`, margin + 2, leftY + 8);
                doc.setFontSize(9);
                doc.setFont(undefined, 'bold');
                doc.text(`Final Price: BDT ${finalPrice.toLocaleString()}`, margin + 2, leftY + 14);
                leftY += pricingHeight + 4;

                // Package Includes - Compact
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(0, 2, 110);
                doc.text('Includes:', margin, leftY);
                leftY += 4;

                doc.setFontSize(7);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(0, 0, 0);
                includes.slice(0, 6).forEach(item => {
                    const lines = doc.splitTextToSize('âœ“ ' + item, colWidth - 2);
                    doc.text(lines, margin, leftY);
                    leftY += lines.length * 3;
                });

                // Package Excludes - Compact
                leftY += 2;
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(0, 2, 110);
                doc.text('Excludes:', margin, leftY);
                leftY += 4;

                doc.setFontSize(7);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(0, 0, 0);
                excludes.slice(0, 6).forEach(item => {
                    const lines = doc.splitTextToSize('âœ— ' + item, colWidth - 2);
                    doc.text(lines, margin, leftY);
                    leftY += lines.length * 3;
                });

                // RIGHT COLUMN - Description & Itinerary
                const rightX = margin + colWidth + 5;

                // Description - Compact
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(0, 2, 110);
                doc.text('About This Tour:', rightX, rightY);
                rightY += 4;

                doc.setFontSize(7);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(85, 85, 85);
                const descLines = doc.splitTextToSize(tourDescription, colWidth);
                const maxDescLines = 8; // Limit description lines
                doc.text(descLines.slice(0, maxDescLines), rightX, rightY);
                rightY += Math.min(descLines.length, maxDescLines) * 3 + 3;

                // Itinerary - Compact
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(0, 2, 110);
                doc.text('Daily Itinerary:', rightX, rightY);
                rightY += 4;

                const maxDays = Math.min(itineraryDays.length, 7); // Show max 7 days
                itineraryDays.slice(0, maxDays).forEach((day, index) => {
                    // Background box
                    const boxHeight = 14;
                    doc.setFillColor(248, 250, 252);
                    doc.roundedRect(rightX, rightY - 3, colWidth, boxHeight, 1, 1, 'F');
                    
                    doc.setFontSize(8);
                    doc.setFont(undefined, 'bold');
                    doc.setTextColor(0, 2, 110);
                    doc.text(`Day ${day.day} - ${day.location}`, rightX + 2, rightY);
                    rightY += 3.5;

                    doc.setFontSize(7);
                    doc.setFont(undefined, 'normal');
                    doc.setTextColor(0, 0, 0);
                    doc.text(`${day.hotel} (${day.roomType})`, rightX + 2, rightY);
                    rightY += 3;

                    doc.setFontSize(6.5);
                    doc.setTextColor(85, 85, 85);
                    const activityLines = doc.splitTextToSize(day.activities, colWidth - 4);
                    doc.text(activityLines.slice(0, 2), rightX + 2, rightY); // Max 2 lines per activity
                    rightY += Math.min(activityLines.length, 2) * 2.5 + 3;
                });

                // Footer - Compact
                doc.setFontSize(7);
                doc.setTextColor(128, 128, 128);
                doc.text('Terms & Conditions apply. Prices subject to availability.', margin, pageHeight - 10);
                doc.text('For confirmation: tours@gozayaan.com', margin, pageHeight - 6);

                // Save PDF
                const fileName = `${tourName.replace(/[^a-z0-9]/gi, '_')}_${customerName.replace(/[^a-z0-9]/gi, '_')}.pdf`;
                doc.save(fileName);

            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('Error generating PDF. Please try again.');
            } finally {
                loading.classList.remove('active');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderItinerary();
            
            // Add event listeners to all form inputs
            document.querySelectorAll('input, select, textarea').forEach(input => {
                input.addEventListener('input', updatePreview);
                input.addEventListener('change', updatePreview);
            });

            // Add event listeners to checkboxes
            document.querySelectorAll('.include-checkbox, .exclude-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updatePreview);
            });
        });
    </script>
</body>
</html>
